(function(){"use strict";var e={606:function(e,t,o){var n=o(963),a=o(252);const s={id:"app"};function r(e,t,o,n,r,i){const l=(0,a.up)("Navbar"),p=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(l),(0,a.Wm)(p)])}const i=(0,a.Uk)("track");function l(e,t,o,n,s,r){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",null,[(0,a.Wm)(l,{class:"navbar-brand",to:"/"},{default:(0,a.w5)((()=>[i])),_:1})])}var p={},d=o(744);const c=(0,d.Z)(p,[["render",l]]);var u=c,m={name:"App",components:{Navbar:u}};const g=(0,d.Z)(m,[["render",r]]);var h=g,b=o(119),f=o(577);const v={class:"page"},y=(0,a._)("h1",null," Courses ",-1),_={class:"card-body"},j={class:"card-title"},S=["onClick"],w=(0,a._)("br",null,null,-1),C=(0,a._)("button",{class:"btn btn-success"},"Add",-1);function k(e,t,o,s,r,i){const l=(0,a.up)("router-link"),p=(0,a.up)("draggable");return(0,a.wg)(),(0,a.iD)("div",v,[y,(0,a.Wm)(p,{id:"projects",modelValue:r.projects,"onUpdate:modelValue":t[0]||(t[0]=e=>r.projects=e),"item-key":"id"},{item:(0,a.w5)((({element:e})=>[(0,a._)("div",_,[(0,a.Wm)(l,{to:{name:"project",params:{id:e.id}}},{default:(0,a.w5)((()=>[(0,a._)("p",j,(0,f.zw)(e.name),1)])),_:2},1032,["to"]),(0,a._)("button",{class:"btn btn-danger",onClick:t=>i.deleteProject(e)},"Delete",8,S)])])),_:1},8,["modelValue"]),(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>i.insertProject&&i.insertProject(...e)),["prevent"])),class:"card-body-create"},[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control card-title",placeholder:"Course Number","onUpdate:modelValue":t[1]||(t[1]=e=>r.course_id=e)},null,512),[[n.nr,r.course_id]]),w,C],32)])}var I=o(980),T=o.n(I),P={components:{draggable:T()},data(){return{projects:[],course_id:null}},methods:{deleteProject(e){fetch(`http://34.125.83.68/api/projects/${e.id}/`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((()=>{const t=this.projects.findIndex((t=>t.id===e.id));this.projects.splice(t,1),localStorage.removeItem(e.id+"groups"),localStorage.removeItem(e.id+"projectname"),localStorage.removeItem(e.id+"comments")})).catch((e=>{console.log(e)}))},insertProject(){this.course_id&&fetch("http://34.125.83.68/api/create_project/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({course_id:this.course_id})}).then((e=>e.json())).then((e=>{this.projects.push(e.data)})).catch((e=>{console.log(e)}))}},watch:{projects:{handler(){this.projects?localStorage.setItem("projects",JSON.stringify(this.projects)):localStorage.setItem("projects","null")},deep:!0}},created(){const e=localStorage.getItem("projects");e?this.projects=JSON.parse(e):fetch("http://34.125.83.68/api/projects/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.projects.push(...e.data)})).catch((e=>{console.log(e)}))}};const E=(0,d.Z)(P,[["render",k]]);var O=E;const N=e=>((0,a.dD)("data-v-0a8285f0"),e=e(),(0,a.Cn)(),e),x={class:"page"},D={class:"group-title"},F={contenteditable:"true"},A={style:{display:"flex"}},J=["onMousedown"],M={class:"list-group-item"},U=["onClick"],$=["onClick"],z={class:"group-title"},G={class:"form-popup",id:"addForm"},L=(0,a.uE)('<h3 data-v-0a8285f0>New Page</h3><label for="type" data-v-0a8285f0><b data-v-0a8285f0>Type</b></label><input type="text" placeholder="Enter Page Type" name="type" required data-v-0a8285f0><label for="title" data-v-0a8285f0><b data-v-0a8285f0>Title</b></label><input type="text" placeholder="Enter Title" name="title" required data-v-0a8285f0><label for="url" data-v-0a8285f0><b data-v-0a8285f0>URL</b></label><input type="url" placeholder="Enter Page URL" name="url" data-v-0a8285f0><button type="submit" class="btn btn-success btn-form" data-v-0a8285f0>Submit</button>',8),K={class:"form-popup",id:"editForm"},V=N((()=>(0,a._)("h3",null,"Edit Page",-1))),W=N((()=>(0,a._)("label",{for:"type"},[(0,a._)("b",null,"Type")],-1))),q=N((()=>(0,a._)("label",{for:"title"},[(0,a._)("b",null,"Title")],-1))),R=N((()=>(0,a._)("label",{for:"url"},[(0,a._)("b",null,"URL")],-1))),H=N((()=>(0,a._)("button",{type:"submit",class:"btn btn-success btn-form"},"Submit",-1)));function Z(e,t,o,s,r,i){const l=(0,a.up)("page-card"),p=(0,a.up)("draggable"),d=(0,a.up)("comments-popup");return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("h1",null,(0,f.zw)(r.projectname),1),(0,a._)("div",null,[(0,a.Wm)(p,{list:r.groups,"item-key":"id",animation:"200",group:"group"},{item:(0,a.w5)((({element:e})=>[(0,a._)("div",null,[(0,a._)("div",D,[(0,a._)("p",F,(0,f.zw)(e.name),1)]),(0,a.Wm)(p,{list:e.pages,"item-key":o.id,ref:e.color,animation:200,"ghost-class":"ghost-card",group:"assets",class:"assets-drag",handle:".handle",onEnd:i.dragEnd},{item:(0,a.w5)((({element:e})=>[(0,a._)("div",A,[(0,a._)("button",{class:"handle",onMousedown:t=>i.dragHandle(e)},"⋮",40,J),(0,a._)("div",M,[(0,a.Wm)(l,{page:e,onStatus:t=>i.updateStatus(e,t),onComments:t=>i.updateComments(e,t),onEvent:t=>i.getClickEvent(e)},null,8,["page","onStatus","onComments","onEvent"])]),(0,a._)("button",{class:"btn-edit",onClick:t=>i.showEditForm(e)},"✎",8,U)])])),_:2},1032,["list","item-key","onEnd"]),(0,a._)("button",{id:"createpage",onClick:t=>i.showForm(e)}," + Add Page ",8,$)])])),_:1},8,["list"]),(0,a._)("div",z,[(0,a.wy)((0,a._)("input",{class:"add-group","onUpdate:modelValue":t[0]||(t[0]=e=>r.newgroup=e),placeholder:"+ New Module",onKeyup:t[1]||(t[1]=(0,n.D2)(((...e)=>i.addGroup&&i.addGroup(...e)),["enter"]))},null,544),[[n.nr,r.newgroup]])]),(0,a._)("div",G,[(0,a._)("form",{class:"form-container",onSubmit:t[3]||(t[3]=(0,n.iM)(((...e)=>i.addAsset&&i.addAsset(...e)),["prevent"]))},[(0,a._)("button",{type:"button",class:"btn-cancel",onClick:t[2]||(t[2]=(...e)=>i.closeForm&&i.closeForm(...e))},"✖"),L],32)]),(0,a._)("div",K,[(0,a._)("form",{class:"form-container",onSubmit:t[9]||(t[9]=(0,n.iM)(((...e)=>i.editAsset&&i.editAsset(...e)),["prevent"]))},[(0,a._)("button",{type:"button",class:"btn-cancel",onClick:t[4]||(t[4]=(...e)=>i.closeForm&&i.closeForm(...e))},"✖"),V,W,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Enter Page Type",name:"type","onUpdate:modelValue":t[5]||(t[5]=e=>r.page.type=e),required:""},null,512),[[n.nr,r.page.type]]),q,(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Enter Title",name:"title","onUpdate:modelValue":t[6]||(t[6]=e=>r.page.name=e),required:""},null,512),[[n.nr,r.page.name]]),R,(0,a.wy)((0,a._)("input",{type:"url",placeholder:"Enter Page URL",name:"url","onUpdate:modelValue":t[7]||(t[7]=e=>r.page.url=e),required:""},null,512),[[n.nr,r.page.url]]),(0,a._)("button",{class:"btn btn-danger btn-form",onClick:t[8]||(t[8]=(...e)=>i.deleteAsset&&i.deleteAsset(...e))},"Delete Page"),H],32)]),r.commentsvisible?((0,a.wg)(),(0,a.j4)(d,{key:0,id:"commentspopup",page:r.cPage,onComment:i.addComment,onCommentsvisible:i.exitCommentsPopup},null,8,["page","onComment","onCommentsvisible"])):(0,a.kq)("",!0)])])}const B=e=>((0,a.dD)("data-v-975fb73a"),e=e(),(0,a.Cn)(),e),Y={class:"task-card"},Q=["href"],X={id:"card-title"},ee={id:"type"},te=(0,a.Uk)(": "),oe={id:"options"},ne=["value"],ae=B((()=>(0,a._)("option",{class:"green",value:"Done"},"Done",-1))),se=B((()=>(0,a._)("option",{class:"purple",value:"In Progress"},"In Progress",-1))),re=B((()=>(0,a._)("option",{class:"orange",value:"In Review"},"In Review",-1))),ie=B((()=>(0,a._)("option",{class:"blue",value:"Not Started"},"Not Started",-1))),le=[ae,se,re,ie];function pe(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",Y,[(0,a._)("a",{href:o.page.url,target:"_blank"},[(0,a._)("p",X,[(0,a._)("span",ee,[(0,a._)("em",null,(0,f.zw)(o.page.type),1),te]),(0,a.Uk)(" "+(0,f.zw)(o.page.name),1)])],8,Q),(0,a._)("div",oe,[(0,a._)("button",{class:"btn btn-light",onClick:t[0]||(t[0]=(...e)=>r.openNotes&&r.openNotes(...e))},"Notes"),(0,a._)("div",{id:"select",class:(0,f.C_)(r.getColor(o.page.status)),onChange:t[1]||(t[1]=(...e)=>r.editStatus&&r.editStatus(...e))},[(0,a._)("select",{name:"progress",value:o.page.status},le,8,ne)],34)])])}var de={props:{page:{type:Object,default:()=>({})}},methods:{getColor(e){var t;return t="Done"==e?"green":"In Progress"==e?"purple":"In Review"==e?"orange":"Not Started"==e?"red":"darkgray",t},editStatus(e){fetch(`http://34.125.83.68/api/pages/${this.page.id}/edit_status/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e.target.value})}).then((e=>e.json())).then((e=>{this.$emit("status",e.data.status)})).catch((e=>{console.log(e)}))},openNotes(e){this.$emit("event",e)}}};const ce=(0,d.Z)(de,[["render",pe],["__scopeId","data-v-975fb73a"]]);var ue=ce;const me={class:"commentspop"},ge={class:"header"},he={class:"kanban"},be=["onKeyup"],fe=["onKeyup"],ve={class:"datetime"},ye={class:"kanbanCol"};function _e(e,t,o,s,r,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",me,[(0,a._)("div",ge,[(0,a._)("h2",null,(0,f.zw)(o.page.type)+": "+(0,f.zw)(o.page.name),1),(0,a._)("button",{type:"button",class:"btn-cancel",onClick:t[0]||(t[0]=(...e)=>i.closeForm&&i.closeForm(...e))},"✖")]),(0,a._)("div",he,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.groups,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"kanbanCol",key:e.label},[(0,a._)("h3",{onKeyup:(0,n.D2)((t=>i.editCategory(e,t)),["enter"])},(0,f.zw)(e.label),41,be),(0,a._)("div",{class:"kanbanComment",contenteditable:"true","data-ph":"Add note",onKeyup:(0,n.D2)((t=>i.addComment(e.label,t)),["enter"])},null,40,fe),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comments,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"kanbanComment",key:e.id},[(0,a._)("p",null,(0,f.zw)(e.description),1),(0,a._)("p",ve,(0,f.zw)(e.datetime),1)])))),128))])))),128)),(0,a._)("div",ye,[(0,a._)("h3",{contenteditable:"true","data-ph":"Add category",onKeyup:t[1]||(t[1]=(0,n.D2)(((...e)=>i.addCategory&&i.addCategory(...e)),["enter"]))},null,32)])])])])}var je={props:{page:{type:Object,default:()=>({})}},data(){return{groups:[],thispage:null,comments:[]}},methods:{getPageData(){this.thispage=this.page,this.groups=this.getGroups(this.thispage.comments,this.comments)},getGroups(e,t){let o=[],n=[];t.forEach(((e,t)=>{o[t]=e.label}));let a=[...new Set(o)];for(let r=0;r<a.length;r++){var s=e.filter((e=>e.label===a[r]));n.push({label:a[r],comments:s.reverse()})}return n},closeForm(e){e.target.parentElement.parentElement.parentElement.style.display="none",this.$emit("commentsvisible",!1)},addComment(e,t){var o=t.target.innerText.replace(/\s+/," ");t.target.innerHTML="",fetch(`http://34.125.83.68/api/pages/${this.page.id}/add_comment/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({label:e,description:o,datetime:Date().toLocaleString()})}).then((e=>e.json())).then((t=>{const o=this.groups.findIndex((t=>t.label===e));this.groups[o].comments.unshift(t.data),this.comments.push(t.data),this.$emit("comment",t.data)})).catch((e=>{console.log(e)}))},addCategory(e){var t=e.target.innerText.replace(/\s+/," ");e.target.innerHTML="",e.target.blur(),this.groups.push({label:t,comments:[]})},editCategory(e,t){var o=t.target.innerText.replace(/\s+/," ");t.target.blur();const n=this.groups.findIndex((t=>t.label===e.label));this.groups[n].label=o}},watch:{comments:{handler(){this.comments?localStorage.setItem(this.page.proj_id+"comments",JSON.stringify(this.comments)):localStorage.setItem(this.page.proj_id+"comments","null")},deep:!0}},created(){const e=this.page.proj_id,t=localStorage.getItem(e+"comments");t?(this.comments=JSON.parse(t),this.getPageData()):fetch(`http://34.125.83.68/api/projects/${e}/get_comments/`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.comments=e.data,this.getPageData()})).catch((e=>{console.log(e)}))}};const Se=(0,d.Z)(je,[["render",_e],["__scopeId","data-v-5355ef62"]]);var we=Se,Ce={name:"App",components:{PageCard:ue,CommentsPopup:we,draggable:T()},props:{id:{type:[Number,String],required:!0}},data(){return{projectname:"",projectid:0,newgroup:"",groupname:"",groups:[],cModule:null,cPage:null,draggedpage:{id:null,position:null,type:null,module:null,name:null,url:null,status:null},page:{id:null,position:null,type:null,module:null,name:null,url:null,status:null},commentsvisible:!1}},methods:{getGroups(e){let t=[],o=[];e.forEach(((e,o)=>{t[o]=e.module}));let n=[...new Set(t)];for(let s=0;s<n.length;s++){var a=e.filter((e=>e.module===n[s]));o.push({name:n[s],pages:a})}for(let s=0;s<o.length;s++)o[s].pages=o[s].pages.sort(((e,t)=>e.position-t.position));return o},showForm(e){document.getElementById("addForm").style.display="inline-block",this.groupname=e.name},showEditForm(e){document.getElementById("editForm").style.display="inline-block",this.page=e,this.cModule=e.module},closeForm(){document.getElementById("addForm").style.display="none",document.getElementById("editForm").style.display="none"},addAsset(e){var t=e.target.elements;fetch(`http://34.125.83.68/api/projects/${this.id}/add_page/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.title.value,type:t.type.value,module:this.groupname,url:t.url.value,status:"Not Started"})}).then((e=>e.json())).then((e=>{this.groups[this.groups.findIndex((e=>e.name===this.groupname))].pages.push(e.data),this.closeForm()})).catch((e=>{console.log(e)}))},editAsset(){fetch(`http://34.125.83.68/api/pages/${this.page.id}/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:this.page.type,name:this.page.name,url:this.page.url})}).then((e=>e.json())).then((()=>{this.closeForm()})).catch((e=>{console.log(e)}))},deleteAsset(){fetch(`http://34.125.83.68/api/pages/${this.page.id}/`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((()=>{const e=this.groups.findIndex((e=>e.name===this.cModule)),t=this.groups[e].pages.findIndex((e=>e.id===this.page.id));this.groups[e].pages.splice(t,1),this.closeForm()})).catch((e=>{console.log(e)}))},updateStatus(e,t){e.status=t},updateComments(e,t){e.comments=e.comments.push(t)},dragEnd(e){var t=e.to.previousSibling.innerText;const o=this.groups.findIndex((e=>e.name===t)),n=this.groups[o].pages.findIndex((e=>e.id===this.draggedpage.id));var a=this.groups[o].pages;a[n].module=t,0==n?a[n].position=a[n+1].position-100:n==a.length-1?a[n].position=a[n-1].position+100:a[n].position=(a[n-1].position+a[n+1].position)/2,fetch(`http://34.125.83.68/api/pages/${a[n].id}/edit_position/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({position:a[n].position,module:a[n].module})}).then((e=>e.json())).then((()=>{})).catch((e=>{console.log(e)}))},dragHandle(e){this.draggedpage=e},addGroup(){if(this.newgroup.trim().length>0){let e={name:this.newgroup,pages:[]};this.groups.push(e)}},getClickEvent(e){this.commentsvisible=!0,this.cPage=e},exitCommentsPopup(e){this.commentsvisible=e},addComment(e){const t=this.groups.findIndex((e=>e.name===this.cPage.module)),o=this.groups[t].pages.findIndex((e=>e.id===this.cPage.id));this.groups[t].pages[o].comments.push(e)}},watch:{groups:{handler(){this.groups?localStorage.setItem(this.id+"groups",JSON.stringify(this.groups)):localStorage.setItem(this.id+"groups","null")},deep:!0},projectname:{handler(){this.projectname?localStorage.setItem(this.id+"projectname",JSON.stringify(this.projectname)):localStorage.setItem(this.id+"projectname","null")},deep:!0}},created(){localStorage.getItem(this.id+"groups")?(this.groups=JSON.parse(localStorage.getItem(this.id+"groups")),localStorage.getItem(this.id+"projectname")&&(this.projectname=JSON.parse(localStorage.getItem(this.id+"projectname")))):fetch(`http://34.125.83.68/api/projects/${this.id}/`,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{this.projectname=e.data.name,this.groups=this.getGroups(e.data.pages)})).catch((e=>{console.log(e)}))}};const ke=(0,d.Z)(Ce,[["render",Z],["__scopeId","data-v-0a8285f0"]]);var Ie=ke;const Te=[{path:"/",name:"home",component:O},{path:"/project/:id",name:"project",component:Ie,props:!0}],Pe=(0,b.p7)({history:(0,b.PO)(),routes:Te});var Ee=Pe;const Oe=(0,n.ri)(h);Oe.use(Ee),Oe.mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,s){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],s=e[d][2];for(var i=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[l])}))?n.splice(l--,1):(i=!1,s<r&&(r=s));if(i){e.splice(d--,1);var p=a();void 0!==p&&(t=p)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,a,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,r=n[0],i=n[1],l=n[2],p=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var d=l(o)}for(t&&t(n);p<r.length;p++)s=r[p],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(606)}));n=o.O(n)})();
//# sourceMappingURL=app.5b0ac739.js.map